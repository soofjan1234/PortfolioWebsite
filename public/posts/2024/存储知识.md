# Samba

使得Linux和UNIX系统能够与Windows系统进行无缝的文件和打印机共享

SAMBA是基于NetBIOS（Network Basic Input/Output System）协议上开发的。NetBIOS是用于局域网少数计算机进行网络连接的一个通讯协议，无法跨越路由，SAMBA使用NetBIOS over TCP/IP实现跨路由通讯。

NetBIOS使用NetBIOS name识别不同的主机，在同一个群组中，每个主机的NetBIOS name必须是唯一的。所以SAMBA提供的文件共享服务主要分为两个步骤

1. 通过NetBIOS name定位主机；　
2.  根据权限控制资源读写。

SAMBA通过两个服务进程支持这两个步骤，分别是：

1. nmb：管理工作组，负责NetBIOS name解析。主要使用UDP协议，开启137，138端口来负责NetBIOS name解析的任务。
2. smb：管理SAMBA分享的目录、文件等。主要使用TCP协议，开启139，445端口进行数据传输。（445端口非必要）

SAMBA有两种联机模式：

1. peer/peer（Workgroup model，对等模式）：各个主机地位平等，都可独立运作。不会出现一部计算机关闭，其他计算机就无法工作的情况。主机之间可同时互为client与server，但用户需要记住所有主机的账号与密码，很麻烦，适合小型网域。
2. domain model（主控模式）：主控计算机（Primary Domain Controller，PDC）统一管理当前网域所有主机与用户的账号与密码。无论登录哪一个主机都需要先到PDC进行账号密码判断与授权。

# WebDav

WebDAV代表“基于Web的分布式创作和版本控制”。它是HTTP协议的一组扩展，允许用户协作编辑和管理远程web服务器上的文件。我理解的WebDav其实就是一个http请求而已，只是拿来做的事情是管理服务上的文件。不过呢，通过一些特殊的规则让服务器对特殊的http请求进行相应的逻辑处理，使得管理服务器文件更方便且功能更丰富。

> **注意：认证这块确实比较简陋，用`Basic Auth`方式认证，比较容易被攻击。所以我一般都会为文件进行加密，或者用别的方案保证文件传输的安全性，比如KeePass使用key文件，即使数据库文件被人盗用也打不开**
> 

## 方法

1. **GET**：用于从服务器获取指定资源的内容。通过 GET 方法可以下载文件或获取文件的元数据。
2. **PUT**：用于将数据或文件上传到服务器上的指定位置。通过 PUT 方法可以创建新文件或更新现有文件。
3. **DELETE**：用于从服务器上删除指定的资源，包括文件和文件夹。
4. **PROPFIND**：用于获取指定资源的属性信息。通过 PROPFIND 方法可以获取资源的元数据、文件大小、创建日期等属性。
5. **MKCOL**：用于在服务器上创建新的集合（文件夹）。
6. **COPY**：用于在服务器上复制资源。通过 COPY 方法可以将资源从一个位置复制到另一个位置。
7. **MOVE**：用于在服务器上移动资源。通过 MOVE 方法可以将资源从一个位置移动到另一个位置，同时也可以用于对资源进行重命名。